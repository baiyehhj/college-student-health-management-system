# application.yml - Spring Boot 配置文件
spring:
  application:
    name: student-health-management
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/health_manage_system?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      auto-commit: true
      idle-timeout: 30000
      max-lifetime: 1800000
      connection-timeout: 30000
  
  # MyBatis Plus 配置
  mybatis-plus:
    configuration:
      map-underscore-to-camel-case: true
      log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    global-config:
      db-config:
        id-type: auto
        logic-delete-field: deleted
        logic-delete-value: 1
        logic-not-delete-value: 0
    mapper-locations: classpath*:/mapper/**/*.xml
  
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 100MB
  
  # Redis配置(可选,用于缓存)
  redis:
    host: localhost
    port: 6379
    database: 0
    timeout: 3000
    jedis:
      pool:
        max-active: 8
        max-wait: -1ms
        max-idle: 8
        min-idle: 0

# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /api

# JWT配置
jwt:
  secret: StudentHealthManagementSystemSecretKey2025
  expiration: 86400000  # 24小时(毫秒)
  header: Authorization
  prefix: Bearer 

# 扣子API配置
coze:
  api:
    url: https://api.coze.cn/v3/chat
    token: pat_DJx0hL6TQxlKV6faPCZ9jhl3wfzoV88U4TxUTJ1CSn9Ca7IDP7JtxPLimR1EqNE5
    bot-id: 7569554814154801206
  food:
    api:
      url: https://api.coze.cn/v3/chat
      token: pat_DJx0hL6TQxlKV6faPCZ9jhl3wfzoV88U4TxUTJ1CSn9Ca7IDP7JtxPLimR1EqNE5
      bot-id: 7575210805214707764
      file-upload-url: https://api.coze.cn/v1/files/upload

# 日志配置
logging:
  level:
    root: INFO
    com.health.management: DEBUG
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n'
  file:
    name: logs/health-management.log
